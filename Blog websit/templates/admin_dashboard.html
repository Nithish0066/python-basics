{% extends "base.html" %}
{% block content %}

<!-- Header -->
<div class="p-4 mb-4 rounded-4"
     style="background: rgba(255,255,255,0.06); backdrop-filter: blur(10px);">

    <div class="d-flex justify-content-between align-items-center">
        <div>
            <h2 class="fw-bold mb-1">Admin Dashboard</h2>
            <p class="mb-0 text-light">
                Welcome back, <span class="fw-bold">{{ current_user.username }}</span> 
            </p>
        </div>

        <a href="/create-post"
           class="btn btn-primary px-4 py-2 rounded-pill">
            + Create Blog
        </a>
    </div>
</div>

<!-- Add Category -->
<div class="p-4 mb-4 rounded-4"
     style="background: rgba(255,255,255,0.05); backdrop-filter: blur(10px);">

    <h5 class="mb-3">Add Category</h5>

    <form method="POST" action="/add-category"
          class="d-flex gap-3">
        <input type="text"
               name="name"
               class="form-control"
               placeholder="Enter category name"
               required>

        <button type="submit"
                class="btn btn-success rounded-pill px-4">
            Add
        </button>
    </form>
</div>
<!-- ===================== POST CARDS ===================== -->
<div class="p-4 mb-5 rounded-4"
     style="background: rgba(255,255,255,0.05); backdrop-filter: blur(10px);">

    <h5 class="mb-4">Post Preview (Card View)</h5>

    <div class="row g-4">

        {% for post in posts %}
        <div class="col-md-6">

            <div class="p-4 rounded-4"
                 style="background: rgba(255,255,255,0.06);
                        border: 1px solid rgba(255,255,255,0.08);
                        transition: 0.3s;">

               <a href="/post/{{ post.id }}"
   style="text-decoration:none; color:white;">
    <h5 class="fw-bold mb-2">
        {{ post.title }}
    </h5>
</a>

                <p class="text-light mb-3">
                    {{ post.content[:120] }}...
                </p>

                <div class="small text-secondary">
                    {{ post.author }} • {{ post.date }} • {{ post.category_name }}
                </div>

            </div>

        </div>
        {% endfor %}

    </div>

</div>



<!-- ===================== POST TABLE ===================== -->
<div class="p-4 rounded-4"
     style="background: rgba(255,255,255,0.05); backdrop-filter: blur(10px);">

    <h5 class="mb-4">Post Management (Table View)</h5>

    <table class="table table-borderless align-middle">

        <thead>
            <tr>
                <th>Title</th>
                <th>Author</th>
                <th>Date</th>
                <th>Category</th>
                <th class="text-end">Actions</th>
            </tr>
        </thead>

        <tbody>
        {% for post in posts %}
            <tr>
                <td class="fw-semibold">{{ post.title }}</td>
                <td>{{ post.author }}</td>
                <td>{{ post.date }}</td>
                <td>
                    <span class="badge bg-secondary">
                        {{ post.category_name }}
                    </span>
                </td>
                <td class="text-end">
                    <a href="/edit-post/{{ post.id }}"
                       class="btn btn-outline-warning btn-sm me-2 rounded-pill">
                        Edit
                    </a>
                    <a href="/delete-post/{{ post.id }}"
                       class="btn btn-outline-danger btn-sm rounded-pill">
                        Delete
                    </a>
                </td>
            </tr>
        {% endfor %}
        </tbody>

    </table>

</div>

{% endblock %}